cmake_minimum_required(VERSION 2.6)
project(HV-adjust)

add_subdirectory(math_h)
include_directories(math_h/include)

set(CMAKE_CXX_FLAGS "-pthread -std=gnu++11")
include_directories(include)
file(GLOB HEADERS include/*.h)
file(GLOB SOURCES src/*.cpp)
file(GLOB TESTS tests/*.cpp)
file(GLOB EXAMPLES example/*.cpp)
add_library(hvadjust SHARED ${SOURCES})

foreach(example ${EXAMPLES})
	get_filename_component(ex_app ${example} NAME_WE)
	add_executable(${ex_app} ${example})
	target_link_libraries(${ex_app} hvadjust)
endforeach()

option(tests "Compile tests." OFF) 
if(tests)
	find_package(GTest REQUIRED)
	include_directories(${GTEST_INCLUDE_DIRS})
	add_executable(hvadjust-test.exe ${TESTS})
	target_link_libraries(hvadjust-test.exe hvadjust ${GTEST_BOTH_LIBRARIES})
endif()
